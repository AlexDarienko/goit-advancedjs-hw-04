{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49359738-1a7aad8ecd2da3da8f5235c9c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n/**\n * Функція для отримання зображень з Pixabay API\n * @param {string} query - Пошуковий запит\n * @param {number} page - Номер сторінки\n * @param {number} perPage - Кількість зображень на сторінці (за замовчуванням 15)\n * @returns {Promise<object>} - Об'єкт зображень та загальною кількістю результатів\n */\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n\n    return {\n      images: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error('Помилка отримання даних:', error);\n    return { images: [], totalHits: 0 };\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createMarkup(images) {\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <a class=\"gallery-item\" href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n        <div class=\"info\">\n          <p><b>Likes:</b> ${likes}</p>\n          <p><b>Views:</b> ${views}</p>\n          <p><b>Comments:</b> ${comments}</p>\n          <p><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </a>`\n    )\n    .join('');\n}\n\nexport function updateGallery(container, images) {\n  container.insertAdjacentHTML('beforeend', createMarkup(images));\n  lightbox.refresh();\n}\n\nexport function clearGallery(container) {\n  container.innerHTML = '';\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { updateGallery, clearGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './css/styles.css';\n\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\nloadMoreBtn.style.display = 'none';\nloader.style.display = 'none';\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = event.target.elements.searchQuery.value.trim();\n\n  if (!query) {\n    iziToast.error({ message: 'Please enter a search query.' });\n    return;\n  }\n\n  clearGallery(gallery);\n  page = 1;\n  loadMoreBtn.style.display = 'none';\n\n  loader.style.display = 'block';\n\n  try {\n    const { images, totalHits: newTotalHits } = await fetchImages(query, page, perPage);\n    totalHits = newTotalHits;\n\n    if (images.length === 0) {\n      iziToast.warning({ message: 'No images found. Try another search.' });\n      return;\n    }\n\n    updateGallery(gallery, images);\n    loadMoreBtn.style.display = page * perPage < totalHits ? 'block' : 'none';\n  } catch (error) {\n    iziToast.error({ message: 'Something went wrong. Please try again.' });\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  loadMoreBtn.style.display = 'none';\n  loader.style.display = 'block';\n\n  try {\n    const { images } = await fetchImages(query, page, perPage);\n\n    if (images.length > 0) {\n      updateGallery(gallery, images);\n\n      const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n      window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n\n    if (page * perPage >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.error({ message: 'Something went wrong. Please try again.' });\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","response","axios","error","lightbox","SimpleLightbox","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateGallery","container","clearGallery","searchForm","gallery","loadMoreBtn","loader","totalHits","event","iziToast","newTotalHits","cardHeight"],"mappings":"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"}