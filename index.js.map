{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49359738-1a7aad8ecd2da3da8f5235c9c\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport default class PixabayAPI {\n  constructor() {\n    this.query = '';\n    this.page = 1;\n    this.perPage = 15;\n    this.totalHits = 0;\n  }\n\n  async fetchImages() {\n    try {\n      const response = await axios.get(BASE_URL, {\n        params: {\n          key: API_KEY,\n          q: this.query,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: true,\n          per_page: this.perPage,\n          page: this.page,\n        },\n      });\n\n      this.totalHits = response.data.totalHits;\n      return response.data.hits;\n    } catch (error) {\n      console.error('Помилка отримання даних:', error);\n      return [];\n    }\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  nextPage() {\n    this.page += 1;\n  }\n\n  hasMorePages() {\n    return this.page * this.perPage < this.totalHits;\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createMarkup(images) {\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <a class=\"gallery-item\" href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n        <div class=\"info\">\n          <p><b>Likes:</b> ${likes}</p>\n          <p><b>Views:</b> ${views}</p>\n          <p><b>Comments:</b> ${comments}</p>\n          <p><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </a>`\n    )\n    .join('');\n}\n\nexport function updateGallery(container, images) {\n  container.insertAdjacentHTML('beforeend', createMarkup(images));\n  lightbox.refresh();\n}\n\nexport function clearGallery(container) {\n  container.innerHTML = '';\n}\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n","\nimport PixabayAPI from './js/pixabay-api';\nimport { updateGallery, clearGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport \"./css/styles.css\";\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst pixabay = new PixabayAPI();\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  pixabay.query = event.target.elements.searchQuery.value.trim();\n\n  if (!pixabay.query) {\n    iziToast.error({ message: 'Please enter a search query.' });\n    return;\n  }\n\n  pixabay.resetPage();\n  clearGallery(gallery);\n  loadMoreBtn.style.display = 'none';\n\n  const images = await pixabay.fetchImages();\n\n  if (images.length === 0) {\n    iziToast.warning({ message: 'No images found. Try another search.' });\n    return;\n  }\n\n  updateGallery(gallery, images);\n  loadMoreBtn.style.display = pixabay.hasMorePages() ? 'block' : 'none';\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  pixabay.nextPage();\n  const images = await pixabay.fetchImages();\n\n  if (images.length > 0) {\n    updateGallery(gallery, images);\n    window.scrollBy({ top: document.querySelector('.gallery-item').getBoundingClientRect().height * 2, behavior: 'smooth' });\n  }\n\n  if (!pixabay.hasMorePages()) {\n    loadMoreBtn.style.display = 'none';\n    iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n  }\n});\n"],"names":["API_KEY","BASE_URL","PixabayAPI","response","axios","error","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateGallery","container","lightbox","clearGallery","SimpleLightbox","searchForm","gallery","loadMoreBtn","pixabay","event","iziToast"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEF,MAAMC,CAAW,CAC9B,aAAc,CACZ,KAAK,MAAQ,GACb,KAAK,KAAO,EACZ,KAAK,QAAU,GACf,KAAK,UAAY,CACrB,CAEE,MAAM,aAAc,CAClB,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIH,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAG,KAAK,MACR,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,KAAK,QACf,KAAM,KAAK,IACZ,CACT,CAAO,EAED,YAAK,UAAYG,EAAS,KAAK,UACxBA,EAAS,KAAK,IACtB,OAAQE,EAAO,CACd,eAAQ,MAAM,2BAA4BA,CAAK,EACxC,CAAE,CACf,CACA,CAEE,WAAY,CACV,KAAK,KAAO,CAChB,CAEE,UAAW,CACT,KAAK,MAAQ,CACjB,CAEE,cAAe,CACb,OAAO,KAAK,KAAO,KAAK,QAAU,KAAK,SAC3C,CACA,CC3CO,SAASC,EAAaC,EAAQ,CACnC,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KAAgB;AAAA,sCAC9CL,CAAa;AAAA,oBAC/BD,CAAY,UAAUE,CAAI;AAAA;AAAA,6BAEjBC,CAAK;AAAA,6BACLC,CAAK;AAAA,gCACFC,CAAQ;AAAA,iCACPC,CAAS;AAAA;AAAA,WAG1C,EACK,KAAK,EAAE,CACZ,CAEO,SAASC,EAAcC,EAAWT,EAAQ,CAC/CS,EAAU,mBAAmB,YAAaV,EAAaC,CAAM,CAAC,EAC9DU,EAAS,QAAS,CACpB,CAEO,SAASC,EAAaF,EAAW,CACtCA,EAAU,UAAY,EACxB,CAEO,MAAMC,EAAW,IAAIE,EAAe,aAAc,CACvD,aAAc,MACd,aAAc,GAChB,CAAC,ECzBKC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEjDC,EAAU,IAAIrB,EAEpBkB,EAAW,iBAAiB,SAAU,MAAMI,GAAS,CAInD,GAHAA,EAAM,eAAgB,EACtBD,EAAQ,MAAQC,EAAM,OAAO,SAAS,YAAY,MAAM,KAAM,EAE1D,CAACD,EAAQ,MAAO,CAClBE,EAAS,MAAM,CAAE,QAAS,8BAA8B,CAAE,EAC1D,MACJ,CAEEF,EAAQ,UAAW,EACnBL,EAAaG,CAAO,EACpBC,EAAY,MAAM,QAAU,OAE5B,MAAMf,EAAS,MAAMgB,EAAQ,YAAa,EAE1C,GAAIhB,EAAO,SAAW,EAAG,CACvBkB,EAAS,QAAQ,CAAE,QAAS,sCAAsC,CAAE,EACpE,MACJ,CAEEV,EAAcM,EAASd,CAAM,EAC7Be,EAAY,MAAM,QAAUC,EAAQ,aAAY,EAAK,QAAU,MACjE,CAAC,EAEDD,EAAY,iBAAiB,QAAS,SAAY,CAChDC,EAAQ,SAAU,EAClB,MAAMhB,EAAS,MAAMgB,EAAQ,YAAa,EAEtChB,EAAO,OAAS,IAClBQ,EAAcM,EAASd,CAAM,EAC7B,OAAO,SAAS,CAAE,IAAK,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAAS,EAAG,SAAU,QAAQ,CAAE,GAGpHgB,EAAQ,iBACXD,EAAY,MAAM,QAAU,OAC5BG,EAAS,KAAK,CAAE,QAAS,4DAA4D,CAAE,EAE3F,CAAC"}